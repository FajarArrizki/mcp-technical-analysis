name = "geartrade-mcp-server"
main = "dist/mcp-server/index.js"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

[env.production]
name = "geartrade-mcp-server"
route = { pattern = "mcp.geartrade.ai/*", zone_name = "geartrade.ai" }

[env.staging]
name = "geartrade-mcp-server-staging"
route = { pattern = "mcp-staging.geartrade.ai/*", zone_name = "geartrade.ai" }

# Environment variables (set via Cloudflare Dashboard or wrangler secret put)
# [vars]
# HYPERLIQUID_API_URL = "https://api.hyperliquid.xyz"
# CYCLE_INTERVAL_MS = "10000"
# PAPER_CAPITAL = "10000"

# Secrets (set via: wrangler secret put SECRET_NAME)
# - HYPERLIQUID_ACCOUNT_ADDRESS
# - HYPERLIQUID_WALLET_API_KEY
# - AI_PROVIDER_API_KEY (optional)
# - MODEL_ID (optional)

[build]
command = "npm run build"

[build.upload]
format = "modules"
dir = "dist"

# Limits
[limits]
cpu_ms = 50

# Logging
[observability]
enabled = true

